/*
 * jScrollPane - v2.0.0beta12 - 2012-07-24
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function(b,pa,q){b.fn.jScrollPane=function(o){function za(c,o){function ja(a){var d,x,p,ka,u,P=!1,Q=!1;e=a;if(f===q)ka=c.scrollTop(),u=c.scrollLeft(),c.css({overflow:"hidden",padding:0}),i=c.innerWidth()+M,h=c.innerHeight(),c.width(i),f=b('<div class="jspPane" />').css("padding",ra).append(c.children()),g=b('<div class="jspContainer" />').css({width:i+"px",height:h+"px"}).append(f).appendTo(c);else{c.css("width","");if(P=e.stickToBottom)P=n-h,P=20<P&&10>P-B();if(Q=e.stickToRight)Q=m-i,Q=20<Q&&10>
Q-C();if(p=c.innerWidth()+M!=i||c.outerHeight()!=h)i=c.innerWidth()+M,h=c.innerHeight(),g.css({width:i+"px",height:h+"px"});if(!p&&sa==m&&f.outerHeight()==n){c.width(i);return}sa=m;f.css("width","");c.width(i);g.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}f.css("overflow","auto");m=a.contentWidth?a.contentWidth:f[0].scrollWidth;n=f[0].scrollHeight;f.css("overflow","");la=m/i;ba=n/h;v=1<ba;t=1<la;if(!t&&!v&&!e.alwaysShowScroll.vertical&&!e.alwaysShowScroll.horizontal)c.removeClass("jspScrollable"),
f.css({top:0,width:g.width()-M}),g.unbind(ma),f.find(":input,a").unbind("focus.jsp"),c.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),ta();else{c.addClass("jspScrollable");if(a=e.maintainPosition&&(l||j))d=C(),x=B();if(v||e.alwaysShowScroll.vertical)g.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),
b('<div class="jspCap jspCapBottom" />'))),ca=g.find(">.jspVerticalBar"),y=ca.find(">.jspTrack"),r=y.find(">.jspDrag"),e.showArrows&&(X=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",D(0,-1)).bind("click.jsp",R),Y=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",D(0,1)).bind("click.jsp",R),e.arrowScrollOnHover&&(X.bind("mouseover.jsp",D(0,-1,X)),Y.bind("mouseover.jsp",D(0,1,Y))),ua(y,e.verticalArrowPositions,X,Y)),E=h,g.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){E=
E-b(this).outerHeight()}),r.hover(function(){r.addClass("jspHover")},function(){r.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",R);r.addClass("jspActive");var d=a.pageY-r.position().top;b("html").bind("mousemove.jsp",function(a){N(a.pageY-d,false)}).bind("mouseup.jsp mouseleave.jsp",va);return false}),wa();if(t||e.alwaysShowScroll.horizontal)g.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),
b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />'))),da=g.find(">.jspHorizontalBar"),z=da.find(">.jspTrack"),s=z.find(">.jspDrag"),e.showArrows&&(Z=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",D(-1,0)).bind("click.jsp",R),$=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",D(1,0)).bind("click.jsp",R),e.arrowScrollOnHover&&(Z.bind("mouseover.jsp",D(-1,0,Z)),$.bind("mouseover.jsp",D(1,0,$))),ua(z,e.horizontalArrowPositions,Z,$)),s.hover(function(){s.addClass("jspHover")},
function(){s.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",R);s.addClass("jspActive");var d=a.pageX-s.position().left;b("html").bind("mousemove.jsp",function(a){S(a.pageX-d,false)}).bind("mouseup.jsp mouseleave.jsp",va);return false}),w=g.innerWidth(),xa();if(t&&v){p=z.outerHeight();var ya=y.outerWidth();E-=p;b(da).find(">.jspCap:visible,>.jspArrow").each(function(){w+=b(this).outerWidth()});w-=ya;h-=ya;i-=p;z.parent().append(b('<div class="jspCorner" />').css("width",
p+"px"));wa();xa()}t&&f.width(g.outerWidth()-M+"px");n=f.outerHeight();ba=n/h;t&&(F=Math.ceil(1/la*w),F>e.horizontalDragMaxWidth?F=e.horizontalDragMaxWidth:F<e.horizontalDragMinWidth&&(F=e.horizontalDragMinWidth),s.width(F+"px"),G=w-F,na(j));v&&(H=Math.ceil(1/ba*E),H>e.verticalDragMaxHeight?H=e.verticalDragMaxHeight:H<e.verticalDragMinHeight&&(H=e.verticalDragMinHeight),r.height(H+"px"),A=E-H,oa(l));a&&(T(Q?m-i:d,!1),I(P?n-h:x,!1));f.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){ea(a.target,
false)});g.unbind(ma).bind(ma,function(a,d,b,c){a=j;d=l;k.scrollBy(b*e.mouseWheelSpeed,-c*e.mouseWheelSpeed,false);return a==j&&d==l});var o,qa,J,K,aa,L=!1;g.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(a){a=a.originalEvent.touches[0];o=C();qa=B();J=a.pageX;K=a.pageY;aa=false;L=true}).bind("touchmove.jsp",function(a){if(L){var a=a.originalEvent.touches[0],d=j,b=l;k.scrollTo(o+J-a.pageX,qa+K-a.pageY);aa=aa||Math.abs(J-a.pageX)>5||Math.abs(K-
a.pageY)>5;return d==j&&b==l}}).bind("touchend.jsp",function(){L=false}).bind("click.jsp-touchclick",function(){if(aa)return aa=false});if(e.enableKeyboardNavigation){var O=function(){var a=j,d=l;switch(U){case 40:k.scrollByY(e.keyboardSpeed,false);break;case 38:k.scrollByY(-e.keyboardSpeed,false);break;case 34:case 32:k.scrollByY(h*e.scrollPagePercent,false);break;case 33:k.scrollByY(-h*e.scrollPagePercent,false);break;case 39:k.scrollByX(e.keyboardSpeed,false);break;case 37:k.scrollByX(-e.keyboardSpeed,
false)}return fa=a!=j||d!=l},U,fa,ga=[];t&&ga.push(da[0]);v&&ga.push(ca[0]);f.focus(function(){c.focus()});c.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(a){if(!(a.target!==this&&(!ga.length||!b(a.target).closest(ga).length))){var d=j,e=l;switch(a.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:U=a.keyCode;O();break;case 35:I(n-h);U=null;break;case 36:I(0);U=null}fa=a.keyCode==U&&d!=j||e!=l;return!fa}}).bind("keypress.jsp",function(a){a.keyCode==
U&&O();return!fa});e.hideFocus?(c.css("outline","none"),"hideFocus"in g[0]&&c.attr("hideFocus",!0)):(c.css("outline",""),"hideFocus"in g[0]&&c.attr("hideFocus",!1))}e.clickOnTrack&&(ta(),v&&y.bind("mousedown.jsp",function(a){if(a.originalTarget===q||a.originalTarget==a.currentTarget){var d=b(this),c=d.offset(),x=a.pageY-c.top-l,p,g=true,f=function(){var b=d.offset(),b=a.pageY-b.top-H/2,c=h*e.scrollPagePercent,u=A*c/(n-h);if(x<0)l-u>b?k.scrollByY(-c):N(b);else if(x>0)l+u<b?k.scrollByY(c):N(b);else{i();
return}p=setTimeout(f,g?e.initialDelay:e.trackClickRepeatFreq);g=false},i=function(){p&&clearTimeout(p);p=null;b(document).unbind("mouseup.jsp",i)};f();b(document).bind("mouseup.jsp",i);return false}}),t&&z.bind("mousedown.jsp",function(a){if(a.originalTarget===q||a.originalTarget==a.currentTarget){var d=b(this),c=d.offset(),x=a.pageX-c.left-j,p,g=true,f=function(){var b=d.offset(),b=a.pageX-b.left-F/2,c=i*e.scrollPagePercent,h=G*c/(m-i);if(x<0)j-h>b?k.scrollByX(-c):S(b);else if(x>0)j+h<b?k.scrollByX(c):
S(b);else{u();return}p=setTimeout(f,g?e.initialDelay:e.trackClickRepeatFreq);g=false},u=function(){p&&clearTimeout(p);p=null;b(document).unbind("mouseup.jsp",u)};f();b(document).bind("mouseup.jsp",u);return false}}));a:if(location.hash&&1<location.hash.length){var ha,W;d=escape(location.hash.substr(1));try{ha=b("#"+d+', a[name="'+d+'"]')}catch(ia){break a}ha.length&&f.find(d)&&(0===g.scrollTop()?W=setInterval(function(){if(g.scrollTop()>0){ea(ha,true);b(document).scrollTop(g.position().top);clearInterval(W)}},
50):(ea(ha,!0),b(document).scrollTop(g.position().top)))}e.hijackInternalLinks&&(b(document.body).data("jspHijack")||(b(document.body).data("jspHijack",!0),b(document.body).delegate("a[href*=#]","click",function(a){var d=this.href.substr(0,this.href.indexOf("#")),e=location.href,c;location.href.indexOf("#")!==-1&&(e=location.href.substr(0,location.href.indexOf("#")));if(d===e){d=escape(this.href.substr(this.href.indexOf("#")+1));c;try{c=b("#"+d+', a[name="'+d+'"]')}catch(x){return}if(c.length){d=
c.closest(".jspScrollable");e=d.data("jsp");e.scrollToElement(c,true);if(d[0].scrollIntoView){e=b(pa).scrollTop();c=c.offset().top;(c<e||c>e+b(pa).height())&&d[0].scrollIntoView()}a.preventDefault()}}})))}e.autoReinitialise&&!V?V=setInterval(function(){ja(e)},e.autoReinitialiseDelay):!e.autoReinitialise&&V&&clearInterval(V);ka&&c.scrollTop(0)&&I(ka,!1);u&&c.scrollLeft(0)&&T(u,!1);c.trigger("jsp-initialised",[t||v])}function wa(){y.height(E+"px");l=0;W=e.verticalGutter+y.outerWidth();f.width(i-W-M);
try{0===ca.position().left&&f.css("margin-left",W+"px")}catch(a){}}function xa(){g.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){w-=b(this).outerWidth()});z.width(w+"px");j=0}function ua(a,d,b,e){var c="before",g="after";"os"==d&&(d=/Mac/.test(navigator.platform)?"after":"split");d==c?g=d:d==g&&(c=d,d=b,b=e,e=d);a[c](b)[g](e)}function D(a,d,c){return function(){var g=this,f=c,g=b(g).addClass("jspActive"),i,h,l=!0,j=function(){0!==a&&k.scrollByX(a*e.arrowButtonSpeed);
0!==d&&k.scrollByY(d*e.arrowButtonSpeed);h=setTimeout(j,l?e.initialDelay:e.arrowRepeatFreq);l=!1};j();i=f?"mouseout.jsp":"mouseup.jsp";f=f||b("html");f.bind(i,function(){g.removeClass("jspActive");h&&clearTimeout(h);h=null;f.unbind(i)});this.blur();return!1}}function ta(){z&&z.unbind("mousedown.jsp");y&&y.unbind("mousedown.jsp")}function va(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");r&&r.removeClass("jspActive");s&&s.removeClass("jspActive")}function N(a,
d){v&&((0>a?a=0:a>A&&(a=A),d===q&&(d=e.animateScroll),d)?k.animate(r,"top",a,oa):(r.css("top",a),oa(a)))}function oa(a){a===q&&(a=r.position().top);g.scrollTop(0);l=a;var d=0===l,b=l==A,a=-(a/A)*(n-h);if(J!=d||K!=b)J=d,K=b,c.trigger("jsp-arrow-change",[J,K,L,O]);e.showArrows&&(X[d?"addClass":"removeClass"]("jspDisabled"),Y[b?"addClass":"removeClass"]("jspDisabled"));f.css("top",a);c.trigger("jsp-scroll-y",[-a,d,b]).trigger("scroll")}function S(a,d){t&&((0>a?a=0:a>G&&(a=G),d===q&&(d=e.animateScroll),
d)?k.animate(s,"left",a,na):(s.css("left",a),na(a)))}function na(a){a===q&&(a=s.position().left);g.scrollTop(0);j=a;var d=0===j,b=j==G,a=-(a/G)*(m-i);if(L!=d||O!=b)L=d,O=b,c.trigger("jsp-arrow-change",[J,K,L,O]);e.showArrows&&(Z[d?"addClass":"removeClass"]("jspDisabled"),$[b?"addClass":"removeClass"]("jspDisabled"));f.css("left",a);c.trigger("jsp-scroll-x",[-a,d,b]).trigger("scroll")}function I(a,d){N(a/(n-h)*A,d)}function T(a,d){S(a/(m-i)*G,d)}function ea(a,d,c){var f,l,j=0,k=0,n,m,o;try{f=b(a)}catch(r){return}l=
f.outerHeight();a=f.outerWidth();g.scrollTop(0);for(g.scrollLeft(0);!f.is(".jspPane");)if(j+=f.position().top,k+=f.position().left,f=f.offsetParent(),/^body|html$/i.test(f[0].nodeName))return;f=B();n=f+h;j<f||d?m=j-e.verticalGutter:j+l>n&&(m=j-h+l+e.verticalGutter);m&&I(m,c);j=C();m=j+i;k<j||d?o=k-e.horizontalGutter:k+a>m&&(o=k-i+a+e.horizontalGutter);o&&T(o,c)}function C(){return-f.position().left}function B(){return-f.position().top}function R(){return!1}var e,k=this,f,i,h,g,m,n,la,ba,v,t,r,A,l,
s,G,j,ca,y,W,E,H,X,Y,da,z,w,F,Z,$,V,ra,M,sa,J=!0,L=!0,K=!1,O=!1,ia=c.clone(!1,!1).empty(),ma=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";ra=c.css("paddingTop")+" "+c.css("paddingRight")+" "+c.css("paddingBottom")+" "+c.css("paddingLeft");M=(parseInt(c.css("paddingLeft"),10)||0)+(parseInt(c.css("paddingRight"),10)||0);b.extend(k,{reinitialise:function(a){a=b.extend({},e,a);ja(a)},scrollToElement:function(a,d,b){ea(a,d,b)},scrollTo:function(a,d,b){T(a,b);I(d,b)},scrollToX:function(a,b){T(a,
b)},scrollToY:function(a,b){I(a,b)},scrollToPercentX:function(a,b){T(a*(m-i),b)},scrollToPercentY:function(a,b){I(a*(n-h),b)},scrollBy:function(a,b,c){k.scrollByX(a,c);k.scrollByY(b,c)},scrollByX:function(a,b){var c=(C()+Math[0>a?"floor":"ceil"](a))/(m-i);S(c*G,b)},scrollByY:function(a,b){var c=(B()+Math[0>a?"floor":"ceil"](a))/(n-h);N(c*A,b)},positionDragX:function(a,b){S(a,b)},positionDragY:function(a,b){N(a,b)},animate:function(a,b,c,f){var g={};g[b]=c;a.animate(g,{duration:e.animateDuration,easing:e.animateEase,
queue:!1,step:f})},getContentPositionX:function(){return C()},getContentPositionY:function(){return B()},getContentWidth:function(){return m},getContentHeight:function(){return n},getPercentScrolledX:function(){return C()/(m-i)},getPercentScrolledY:function(){return B()/(n-h)},getIsScrollableH:function(){return t},getIsScrollableV:function(){return v},getContentPane:function(){return f},scrollToBottom:function(a){N(A,a)},hijackInternalLinks:b.noop,destroy:function(){var a=B(),b=C();c.removeClass("jspScrollable").unbind(".jsp");
c.replaceWith(ia.append(f.children()));ia.scrollTop(a);ia.scrollLeft(b);V&&clearInterval(V)}});ja(o)}o=b.extend({},b.fn.jScrollPane.defaults,o);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){o[this]=o[this]||o.speed});return this.each(function(){var c=b(this),q=c.data("jsp");q?q.reinitialise(o):(b("script",c).filter('[type="text/javascript"],not([type])').remove(),q=new za(c,o),c.data("jsp",q))})};b.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,
stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:q,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",
enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8,alwaysShowScroll:{vertical:!1,horizontal:!1}}})(jQuery,this);