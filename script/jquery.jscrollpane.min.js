!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(jQuery||require("jquery")):e(jQuery)}(function(ye){ye.fn.jScrollPane=function(o){function s(m,e){var w,y,k,b,T,C,x,S,D,B,H,P,z,A,W,Y,M,X,R,t,L,E,I,F,V,q,O,G,N,K,Q,U,$,J,Z=this,r=!0,a=!0,l=!1,c=!1,o=m.clone(!1,!1).empty(),_=!1,ee=ye.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp",te=function(){0<w.resizeSensorDelay?setTimeout(function(){oe(w)},w.resizeSensorDelay):oe(w)};function oe(e){var t,o,s,i,n,r,a,l,c,p,d,u,f,h,g,v=!1,j=!1;if(w=e,void(o=t=0)===y)i=m.scrollTop(),n=m.scrollLeft(),m.css({overflow:"hidden",padding:"0"}),k=m.innerWidth()+$,b=m.innerHeight(),m.width(k),y=ye('<div class="jspPane"></div>').css("padding",U).append(m.children()),T=ye('<div class="jspContainer"></div>').css({width:k+"px",height:b+"px"}).append(y).appendTo(m);else{if(m.css("width",""),T.css({width:"auto",height:"auto"}),y.css("position","static"),r=m.innerWidth()+$,a=m.innerHeight(),y.css("position","absolute"),v=w.stickToBottom&&(c=x-b,1!=w.maintainPosition||20<=c&&c-me()<10),j=w.stickToRight&&(l=C-k,1!=w.maintainPosition||20<=l&&l-je()<10),s=r!==k||a!==b,k=r,b=a,T.css({width:k+"px",height:b+"px"}),!s&&J==C&&y.outerHeight()==x)return void m.width(k);J=C,y.css("width",""),m.width(k),T.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}y.css("overflow","auto"),C=e.contentWidth?e.contentWidth:y[0].scrollWidth,x=y[0].scrollHeight,y.css("overflow",""),S=C/k,B=1<(D=x/b)||w.alwaysShowVScroll,(H=1<S||w.alwaysShowHScroll)||B?(m.addClass("jspScrollable"),w.maintainPosition&&(A||M)&&(t=je(),o=me()),B&&(T.append(ye('<div class="jspVerticalBar"></div>').append(ye('<div class="jspCap jspCapTop"></div>'),ye('<div class="jspTrack"></div>').append(ye('<div class="jspDrag"></div>').append(ye('<div class="jspDragTop"></div>'),ye('<div class="jspDragBottom"></div>'))),ye('<div class="jspCap jspCapBottom"></div>'))),X=T.find(">.jspVerticalBar"),R=X.find(">.jspTrack"),P=R.find(">.jspDrag"),w.showArrows&&(I=ye('<a class="jspArrow jspArrowUp"></a>').on("mousedown.jsp",ae(0,-1)).on("click.jsp",we),F=ye('<a class="jspArrow jspArrowDown"></a>').on("mousedown.jsp",ae(0,1)).on("click.jsp",we),w.arrowScrollOnHover&&(I.on("mouseover.jsp",ae(0,-1,I)),F.on("mouseover.jsp",ae(0,1,F))),re(R,w.verticalArrowPositions,I,F)),L=b,T.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){L-=ye(this).outerHeight()}),P.on("mouseenter",function(){P.addClass("jspHover")}).on("mouseleave",function(){P.removeClass("jspHover")}).on("mousedown.jsp",function(e){ye("html").on("dragstart.jsp selectstart.jsp",we),P.addClass("jspActive");var t=e.pageY-P.position().top;return ye("html").on("mousemove.jsp",function(e){pe(e.pageY-t,!1)}).on("mouseup.jsp mouseleave.jsp",ce),!1}),ie()),H&&(T.append(ye('<div class="jspHorizontalBar"></div>').append(ye('<div class="jspCap jspCapLeft"></div>'),ye('<div class="jspTrack"></div>').append(ye('<div class="jspDrag"></div>').append(ye('<div class="jspDragLeft"></div>'),ye('<div class="jspDragRight"></div>'))),ye('<div class="jspCap jspCapRight"></div>'))),V=T.find(">.jspHorizontalBar"),q=V.find(">.jspTrack"),W=q.find(">.jspDrag"),w.showArrows&&(N=ye('<a class="jspArrow jspArrowLeft"></a>').on("mousedown.jsp",ae(-1,0)).on("click.jsp",we),K=ye('<a class="jspArrow jspArrowRight"></a>').on("mousedown.jsp",ae(1,0)).on("click.jsp",we),w.arrowScrollOnHover&&(N.on("mouseover.jsp",ae(-1,0,N)),K.on("mouseover.jsp",ae(1,0,K))),re(q,w.horizontalArrowPositions,N,K)),W.on("mouseenter",function(){W.addClass("jspHover")}).on("mouseleave",function(){W.removeClass("jspHover")}).on("mousedown.jsp",function(e){ye("html").on("dragstart.jsp selectstart.jsp",we),W.addClass("jspActive");var t=e.pageX-W.position().left;return ye("html").on("mousemove.jsp",function(e){ue(e.pageX-t,!1)}).on("mouseup.jsp mouseleave.jsp",ce),!1}),O=T.innerWidth(),ne()),function(){{var e,t;H&&B&&(e=q.outerHeight(),t=R.outerWidth(),L-=e,ye(V).find(">.jspCap:visible,>.jspArrow").each(function(){O+=ye(this).outerWidth()}),O-=t,b-=t,k-=e,q.parent().append(ye('<div class="jspCorner"></div>').css("width",e+"px")),ie(),ne())}H&&y.width(T.outerWidth()-$+"px");x=y.outerHeight(),D=x/b,H&&((G=Math.ceil(1/S*O))>w.horizontalDragMaxWidth?G=w.horizontalDragMaxWidth:G<w.horizontalDragMinWidth&&(G=w.horizontalDragMinWidth),W.css("width",G+"px"),Y=O-G,fe(M));B&&((E=Math.ceil(1/D*L))>w.verticalDragMaxHeight?E=w.verticalDragMaxHeight:E<w.verticalDragMinHeight&&(E=w.verticalDragMinHeight),P.css("height",E+"px"),z=L-E,de(A))}(),(w.stickToBottom||w.stickToRight)&&(ge(j?C-k:t,!1),he(v?x-b:o,!1)),y.find(":input,a").off("focus.jsp").on("focus.jsp",function(e){ve(e.target,!1)}),T.off(ee).on(ee,function(e,t,o,s){var i=M=M||0,n=A=A||0,r=e.deltaFactor||w.mouseWheelSpeed;return Z.scrollBy(o*r,-s*r,!1),i==M&&n==A}),g=!1,T.off("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").on("touchstart.jsp",function(e){var t=e.originalEvent.touches[0];p=je(),d=me(),u=t.pageX,f=t.pageY,g=!(h=!1)}).on("touchmove.jsp",function(e){if(g){var t=e.originalEvent.touches[0],o=M,s=A;return Z.scrollTo(p+u-t.pageX,d+f-t.pageY),h=h||5<Math.abs(u-t.pageX)||5<Math.abs(f-t.pageY),o==M&&s==A}}).on("touchend.jsp",function(e){g=!1}).on("click.jsp-touchclick",function(e){if(h)return h=!1}),w.enableKeyboardNavigation&&function(){var s,i,n=[];H&&n.push(V[0]);B&&n.push(X[0]);y.on("focus.jsp",function(){m.focus()}),m.attr("tabindex",0).off("keydown.jsp keypress.jsp").on("keydown.jsp",function(e){if(e.target===this||n.length&&ye(e.target).closest(n).length){var t=M,o=A;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=e.keyCode,r();break;case 35:he(x-b),s=null;break;case 36:he(0),s=null}return!(i=e.keyCode==s&&t!=M||o!=A)}}).on("keypress.jsp",function(e){if(e.keyCode==s&&r(),e.target===this||n.length&&ye(e.target).closest(n).length)return!i}),w.hideFocus?(m.css("outline","none"),"hideFocus"in T[0]&&m.attr("hideFocus",!0)):(m.css("outline",""),"hideFocus"in T[0]&&m.attr("hideFocus",!1));function r(){var e=M,t=A;switch(s){case 40:Z.scrollByY(w.keyboardSpeed,!1);break;case 38:Z.scrollByY(-w.keyboardSpeed,!1);break;case 34:case 32:Z.scrollByY(b*w.scrollPagePercent,!1);break;case 33:Z.scrollByY(-b*w.scrollPagePercent,!1);break;case 39:Z.scrollByX(w.keyboardSpeed,!1);break;case 37:Z.scrollByX(-w.keyboardSpeed,!1)}return i=e!=M||t!=A}}(),w.clickOnTrack&&function(){le(),B&&R.on("mousedown.jsp",function(i){if(void 0===i.originalTarget||i.originalTarget==i.currentTarget){var n,r=ye(this),e=r.offset(),a=i.pageY-e.top-A,l=!0,c=function(){var e=r.offset(),t=i.pageY-e.top-E/2,o=b*w.scrollPagePercent,s=z*o/(x-b);if(a<0)t<A-s?Z.scrollByY(-o):pe(t);else{if(!(0<a))return void p();A+s<t?Z.scrollByY(o):pe(t)}n=setTimeout(c,l?w.initialDelay:w.trackClickRepeatFreq),l=!1},p=function(){n&&clearTimeout(n),n=null,ye(document).off("mouseup.jsp",p)};return c(),ye(document).on("mouseup.jsp",p),!1}});H&&q.on("mousedown.jsp",function(i){if(void 0===i.originalTarget||i.originalTarget==i.currentTarget){var n,r=ye(this),e=r.offset(),a=i.pageX-e.left-M,l=!0,c=function(){var e=r.offset(),t=i.pageX-e.left-G/2,o=k*w.scrollPagePercent,s=Y*o/(C-k);if(a<0)t<M-s?Z.scrollByX(-o):ue(t);else{if(!(0<a))return void p();M+s<t?Z.scrollByX(o):ue(t)}n=setTimeout(c,l?w.initialDelay:w.trackClickRepeatFreq),l=!1},p=function(){n&&clearTimeout(n),n=null,ye(document).off("mouseup.jsp",p)};return c(),ye(document).on("mouseup.jsp",p),!1}})}(),function(){if(location.hash&&1<location.hash.length){var e,t,o=escape(location.hash.substr(1));try{e=ye("#"+o+', a[name="'+o+'"]')}catch(e){return}e.length&&y.find(o)&&(0===T.scrollTop()?t=setInterval(function(){0<T.scrollTop()&&(ve(e,!0),ye(document).scrollTop(T.position().top),clearInterval(t))},50):(ve(e,!0),ye(document).scrollTop(T.position().top)))}}(),w.hijackInternalLinks&&function(){if(ye(document.body).data("jspHijack"))return;ye(document.body).data("jspHijack",!0),ye(document.body).delegate('a[href*="#"]',"click",function(e){var t,o,s,i,n,r=this.href.substr(0,this.href.indexOf("#")),a=location.href;if(-1!==location.href.indexOf("#")&&(a=location.href.substr(0,location.href.indexOf("#"))),r===a){t=escape(this.href.substr(this.href.indexOf("#")+1));try{o=ye("#"+t+', a[name="'+t+'"]')}catch(e){return}o.length&&((s=o.closest(".jspScrollable")).data("jsp").scrollToElement(o,!0),s[0].scrollIntoView&&(i=ye(window).scrollTop(),((n=o.offset().top)<i||n>i+ye(window).height())&&s[0].scrollIntoView()),e.preventDefault())}})}()):(m.removeClass("jspScrollable"),y.css({top:"0",left:"0",width:T.width()-$}),T.off(ee),y.find(":input,a").off("focus.jsp"),m.attr("tabindex","-1").removeAttr("tabindex").off("keydown.jsp keypress.jsp"),y.off(".jsp"),le()),w.resizeSensor||!w.autoReinitialise||Q?w.resizeSensor||w.autoReinitialise||!Q||clearInterval(Q):Q=setInterval(function(){oe(w)},w.autoReinitialiseDelay),w.resizeSensor&&!_&&(se(y,te),se(m,te),se(m.parent(),te),window.addEventListener("resize",te),_=!0),i&&m.scrollTop(0)&&he(i,!1),n&&m.scrollLeft(0)&&ge(n,!1),m.trigger("jsp-initialised",[H||B])}function se(e,t){var o,s,i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div");i.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",n.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",a.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",r.style.cssText="position: absolute; left: 0; top: 0;",l.style.cssText="position: absolute; left: 0; top: 0; width: 200%; height: 200%;";function c(){r.style.width=n.offsetWidth+10+"px",r.style.height=n.offsetHeight+10+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,o=e.width(),s=e.height()}n.addEventListener("scroll",function(){(e.width()>o||e.height()>s)&&t.apply(this,[]),c()}.bind(this)),a.addEventListener("scroll",function(){(e.width()<o||e.height()<s)&&t.apply(this,[]),c()}.bind(this)),n.appendChild(r),a.appendChild(l),i.appendChild(n),i.appendChild(a),e.append(i),"static"===window.getComputedStyle(e[0],null).getPropertyValue("position")&&(e[0].style.position="relative"),c()}function ie(){R.height(L+"px"),A=0,t=w.verticalGutter+R.outerWidth(),y.width(k-t-$);try{0===X.position().left&&y.css("margin-left",t+"px")}catch(e){}}function ne(){T.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){O-=ye(this).outerWidth()}),q.width(O+"px"),M=0}function re(e,t,o,s){var i,n="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==n?r=t:t==r&&(n=t,i=o,o=s,s=i),e[n](o)[r](s)}function ae(e,t,o){return function(){return function(e,t,o,s){o=ye(o).addClass("jspActive");var i,n,r=!0,a=function(){0!==e&&Z.scrollByX(e*w.arrowButtonSpeed),0!==t&&Z.scrollByY(t*w.arrowButtonSpeed),n=setTimeout(a,r?w.initialDelay:w.arrowRepeatFreq),r=!1};a(),i=s?"mouseout.jsp":"mouseup.jsp",(s=s||ye("html")).on(i,function(){o.removeClass("jspActive"),n&&clearTimeout(n),n=null,s.off(i)})}(e,t,this,o),this.blur(),!1}}function le(){q&&q.off("mousedown.jsp"),R&&R.off("mousedown.jsp")}function ce(){ye("html").off("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),P&&P.removeClass("jspActive"),W&&W.removeClass("jspActive")}function pe(e,t){var o,s,i,n,r;B&&(e<0?e=0:z<e&&(e=z),o=new ye.Event("jsp-will-scroll-y"),m.trigger(o,[e]),o.isDefaultPrevented()||(i=0===(s=e||0),n=s==z,r=-(e/z)*(x-b),void 0===t&&(t=w.animateScroll),t?Z.animate(P,"top",e,de,function(){m.trigger("jsp-user-scroll-y",[-r,i,n])}):(P.css("top",e+"px"),de(e),m.trigger("jsp-user-scroll-y",[-r,i,n]))))}function de(e){void 0===e&&(e=P.position().top),T.scrollTop(0);var t,o,s=0===(A=e||0),i=A==z,n=-(e/z)*(x-b);r==s&&l==i||(r=s,l=i,m.trigger("jsp-arrow-change",[r,l,a,c])),t=s,o=i,w.showArrows&&(I[t?"addClass":"removeClass"]("jspDisabled"),F[o?"addClass":"removeClass"]("jspDisabled")),y.css("top",n+"px"),m.trigger("jsp-scroll-y",[-n,s,i]).trigger("scroll")}function ue(e,t){var o,s,i,n,r;H&&(e<0?e=0:Y<e&&(e=Y),o=new ye.Event("jsp-will-scroll-x"),m.trigger(o,[e]),o.isDefaultPrevented()||(i=0===(s=e||0),n=s==Y,r=-(e/Y)*(C-k),void 0===t&&(t=w.animateScroll),t?Z.animate(W,"left",e,fe,function(){m.trigger("jsp-user-scroll-x",[-r,i,n])}):(W.css("left",e+"px"),fe(e),m.trigger("jsp-user-scroll-x",[-r,i,n]))))}function fe(e){void 0===e&&(e=W.position().left),T.scrollTop(0);var t,o,s=0===(M=e||0),i=M==Y,n=-(e/Y)*(C-k);a==s&&c==i||(a=s,c=i,m.trigger("jsp-arrow-change",[r,l,a,c])),t=s,o=i,w.showArrows&&(N[t?"addClass":"removeClass"]("jspDisabled"),K[o?"addClass":"removeClass"]("jspDisabled")),y.css("left",n+"px"),m.trigger("jsp-scroll-x",[-n,s,i]).trigger("scroll")}function he(e,t){pe(e/(x-b)*z,t)}function ge(e,t){ue(e/(C-k)*Y,t)}function ve(e,t,o){var s,i,n,r,a,l,c,p,d,u=0,f=0;try{s=ye(e)}catch(e){return}for(i=s.outerHeight(),n=s.outerWidth(),T.scrollTop(0),T.scrollLeft(0);!s.is(".jspPane");)if(u+=s.position().top,f+=s.position().left,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;l=(r=me())+b,u<r||t?p=u-w.horizontalGutter:l<u+i&&(p=u-b+i+w.horizontalGutter),isNaN(p)||he(p,o),c=(a=je())+k,f<a||t?d=f-w.horizontalGutter:c<f+n&&(d=f-k+n+w.horizontalGutter),isNaN(d)||ge(d,o)}function je(){return-y.position().left}function me(){return-y.position().top}function we(){return!1}$="border-box"===m.css("box-sizing")?U=0:(U=m.css("paddingTop")+" "+m.css("paddingRight")+" "+m.css("paddingBottom")+" "+m.css("paddingLeft"),(parseInt(m.css("paddingLeft"),10)||0)+(parseInt(m.css("paddingRight"),10)||0)),ye.extend(Z,{reinitialise:function(e){oe(e=ye.extend({},w,e))},scrollToElement:function(e,t,o){ve(e,t,o)},scrollTo:function(e,t,o){ge(e,o),he(t,o)},scrollToX:function(e,t){ge(e,t)},scrollToY:function(e,t){he(e,t)},scrollToPercentX:function(e,t){ge(e*(C-k),t)},scrollToPercentY:function(e,t){he(e*(x-b),t)},scrollBy:function(e,t,o){Z.scrollByX(e,o),Z.scrollByY(t,o)},scrollByX:function(e,t){ue((je()+Math[e<0?"floor":"ceil"](e))/(C-k)*Y,t)},scrollByY:function(e,t){pe((me()+Math[e<0?"floor":"ceil"](e))/(x-b)*z,t)},positionDragX:function(e,t){ue(e,t)},positionDragY:function(e,t){pe(e,t)},animate:function(e,t,o,s,i){var n={};n[t]=o,e.animate(n,{duration:w.animateDuration,easing:w.animateEase,queue:!1,step:s,complete:i})},getContentPositionX:je,getContentPositionY:me,getContentWidth:function(){return C},getContentHeight:function(){return x},getPercentScrolledX:function(){return je()/(C-k)},getPercentScrolledY:function(){return me()/(x-b)},getIsScrollableH:function(){return H},getIsScrollableV:function(){return B},getContentPane:function(){return y},scrollToBottom:function(e){pe(z,e)},hijackInternalLinks:ye.noop,destroy:function(){var e,t;e=me(),t=je(),m.removeClass("jspScrollable").off(".jsp"),y.off(".jsp"),m.replaceWith(o.append(y.children())),o.scrollTop(e),o.scrollLeft(t),Q&&clearInterval(Q)}}),oe(e)}return o=ye.extend({},ye.fn.jScrollPane.defaults,o),ye.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){o[this]=o[this]||o.speed}),this.each(function(){var e=ye(this),t=e.data("jsp");t?t.reinitialise(o):(ye("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new s(e,o),e.data("jsp",t))})},ye.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8,alwaysShowVScroll:!1,alwaysShowHScroll:!1,resizeSensor:!1,resizeSensorDelay:0}});